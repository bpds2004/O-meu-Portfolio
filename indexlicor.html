<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Licor D¬™ Gra√ßa - Loja Online</title>
    <link rel="stylesheet" href="licorstyles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <a href="#home"><img src="licordgraca.png" alt="Logo Licor D'Gra√ßa" class="logo"></a>
            <nav>
                <ul>
                    <li><a href="#home">In√≠cio</a></li>
                    <li><a href="#products">Produtos</a></li>
                    <li><a href="#kits">Os nossos kits</a></li>
                    <li><a href="#events">Os nossos eventos</a></li>
                    <li><a href="#about">Sobre</a></li>
                    <li><a href="#contact">Contactos</a></li>
                    <li>
                        <button class="cart-toggle" id="cart-toggle" type="button" aria-controls="cart" aria-expanded="false">
                            <i class="fas fa-shopping-cart"></i> Carrinho
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="home" class="hero">
        <div class="container">
            <h2>O sabor √∫nico em cada gota</h2>
            <p>Descubra os licores artesanais da Tia Gra√ßa, feitos com paix√£o e tradi√ß√£o.</p>
            <a href="#products" class="btn">Explore os produtos</a>
        </div>
    </section>

    <section id="products">
        <div class="container">
            <h2>Os Nossos Produtos</h2>
            <h3 class="product-category">Sabores tradicionais</h3>
            <div class="product-list">
                <div class="product">
                    <img src="frutos.png" alt="Licor Frutos Vermelhos">
                    <h3>L'amour</h3>
                    <p>
                        <select id="size-lamour">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Sabor intenso de frutos vermelhos, perfeito para momentos especiais. </p>
                    <button onclick="adicionarAoCarrinho('L amour', 'size-lamour')">Adicionar ao Carrinho</button>
                </div>
                <div class="product">
                    <img src="limao.png" alt="Licor Lim√£o">
                    <h3>Fresh</h3>
                    <p>
                        <select id="size-fresh">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Desfrute do frescor c√≠trico do lim√£o, ideal para dias quentes. </p>
                    <button onclick="adicionarAoCarrinho('Fresh', 'size-fresh')">Adicionar ao Carrinho</button>
                </div>
                <div class="product">
                    <img src="chocolimao.png" alt="Licor chocolate">
                    <h3>Afrodite</h3>
                    <p>
                        <select id="size-afrodite">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Combina√ß√£o irresist√≠vel de chocolate e lim√£o para os amantes de sabores √∫nicos. </p>
                    <button onclick="adicionarAoCarrinho('Afrodite', 'size-afrodite')">Adicionar ao Carrinho</button>
                </div>
                <div class="product">
                    <img src="laranja.png" alt="Licor Laranja">
                    <h3>Fonte Azul</h3>
                    <p>
                        <select id="size-fonteazul">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Desfrute do sabor vibrante da laranja, perfeito para qualquer ocasi√£o. </p>
                    <button onclick="adicionarAoCarrinho('Fonte Azul', 'size-fonteazul')">Adicionar ao Carrinho</button>
                </div>
                <div class="product">
                    <img src="cafe.png" alt="Licor Cafe">
                    <h3>Pleasure</h3>
                    <p>
                        <select id="size-pleasure">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Sabor rico e encorpado de gr√£os de caf√©, ideal para os amantes desta bebida. </p>
                    <button onclick="adicionarAoCarrinho('Pleasure', 'size-pleasure')">Adicionar ao Carrinho</button>
                </div>
            </div>

            
            <h3 class="product-category">Sabores premium</h3>
            <div class="product-list">
                
                <div class="product">
                    <img src="ervas.png" alt="Licor Ervas">
                    <h3>S Frei Gil </h3>
                    <p>
                        <select id="size-sfreigil">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Ervas arom√°ticas selecionadas para um sabor √∫nico e sofisticado. </p>
                    <button onclick="adicionarAoCarrinho('S Frei Gil', 'size-sfreigil')">Adicionar ao Carrinho</button>
                </div>
                <div class="product">
                    <img src="pastel.png" alt="Licor Pastel">
                    <h3>Jo√£o Ramalho</h3>
                    <p>
                        <select id="size-joaoramalho">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Sabor inspirado no tradicional pastel de Vouzela, uma del√≠cia para os sentidos. </p>
                    <button onclick="adicionarAoCarrinho('Jo√£o Ramalho', 'size-joaoramalho')">Adicionar ao Carrinho</button>
                </div>
                <div class="product">
                    <img src="chocopimenta.png" alt="Licor Pimenta">
                    <h3> Morais de Carvalho </h3>
                    <p>
                        <select id="size-moraiscarvalho">
                            <option value="30.00">500ml - 30,00‚Ç¨</option>
                            <option value="16.00">200ml - 16,00‚Ç¨</option>
                            <option value="11.00">100ml - 11‚Ç¨</option>
                            <option value="4.50">50ml - 4,5‚Ç¨</option>
                        </select>
                    </p>
                    <p> Combina√ß√£o ousada de chocolate com um toque picante de pimenta. </p>
                    <button onclick="adicionarAoCarrinho('Morais de Carvalho', 'size-moraiscarvalho')">Adicionar ao Carrinho</button>
                </div>
            </div>
        </div>
    </section>

    <section id="kits">
        <div class="container">
            <h2>Os nossos kits</h2>
            <div class="kits-grid">
                <article class="kit-card">
                    <h3>Kits</h3>
                    <ul>
                        <li>Kit de 5 garrafas de 100ml</li>
                        <li>Kit garrafa 200ml + copo</li>
                        <li>Kit garrafa 200ml + copos de chocolates</li>
                        <li>Kit garrafa 200ml + bombons</li>
                        <li>Kit jogo xadrez + garrafa 200ml</li>
                    </ul>
                </article>
            </div>
        </div>
    </section>

    <section id="events">
        <div class="container">
            <h2>Os nossos eventos</h2>
            <div class="events-grid">
                <div class="event-form">
                    <h3>Adicionar evento</h3>
                    <label for="event-name">Nome do evento</label>
                    <input id="event-name" type="text" placeholder="Ex: Feira de Sabores" />
                    <label for="event-location">Local</label>
                    <input id="event-location" type="text" placeholder="Ex: Vouzela" />
                    <label for="event-start">In√≠cio</label>
                    <input id="event-start" type="datetime-local" />
                    <label for="event-end">Fim</label>
                    <input id="event-end" type="datetime-local" />
                    <button type="button" id="event-add">Adicionar ao calend√°rio</button>
                </div>
                <div class="event-calendar">
                    <h3>Calend√°rio</h3>
                    <ul id="event-list"></ul>
                </div>
            </div>
        </div>
    </section>

    <section id="about">
        <div class="container">
            <h2>Sobre N√≥s</h2>
            <img src="patroa.png" alt="Fotografia da Patroa" class="about-image">
            <div class="animated-rectangle">
            <p>Na Licor D'Gra√ßa, acreditamos na arte de criar sabores √∫nicos. Cada garrafa √© produzida com ingredientes selecionados e muito amor.</p>
            <p>üìç Localiza√ß√£o: Queir√£, Vouzela, Portugal</p>
            <p>üç∑ Fundadora: Tia Gra√ßa, mestra na cria√ß√£o de sabores artesanais h√° mais de 10 anos.</p>
            </div>
        </div>
    </section>

    <section id="contact">
        <div class="container">
            <h2>Contactos</h2>
            <p>Entre em contacto connosco atrav√©s dos seguintes meios:</p>
            <ul class="contact-info">
                <li><i class="fab fa-instagram"></i> <strong>Instagram:</strong> <a href="https://www.instagram.com/licordgraca" target="_blank">@licordgraca</a></li>
                <li><i class="fas fa-envelope"></i> <strong>Email:</strong> <a href="mailto:licor.donagraca@gmail.com">licor.donagraca@gmail.com</a></li>
                <li><i class="fab fa-facebook"></i> <strong>Facebook:</strong> <a href="https://www.facebook.com/people/Licor-D-Gra%C3%A7a/100063707763490" target="_blank">facebook.com/Licor-D-Graca</a></li>
                <li><i class="fas fa-phone-alt"></i> <strong>Telem√≥vel:</strong> <a href="tel:+351938923021">+351 938 923 021</a></li>
            </ul>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 Licor D¬™ Gra√ßa. Todos os direitos reservados.</p>
        </div>
    </footer>

    <section id="cart" aria-hidden="true">
        <div class="cart-container">
            <div class="cart-header">
                <h2>Carrinho de Compras</h2>
                <button class="cart-close" type="button" id="cart-close" aria-label="Fechar carrinho">‚úï</button>
            </div>
            <ul id="cart-list"></ul>
            <p id="cart-total">Total: ‚Ç¨0.00</p>
            <button onclick="finalizarCompra()">Finalizar Compra</button>
        </div>
    </section>

    <section id="checkout" style="display:none;">
        <div class="cart-container">
            <h2>Finalizar Compra</h2>
            <ul id="checkout-list"></ul>
            <p id="checkout-total"></p>
            <label for="name">Nome:</label>
            <input id="name" type="text" placeholder="Insira o seu nome" required />
            <label for="phone">Contacto:</label>
            <input id="phone" type="text" placeholder="Insira o seu contacto" required />
            <label for="address">Morada:</label>
            <textarea id="address" placeholder="Insira a sua morada" required></textarea>
            <button class="purchase-animated" id="purchase-button" type="button" data-tooltip="Total: ‚Ç¨0.00" onclick="comprar()">
                <span class="purchase-wrapper">
                    <span class="purchase-text">Comprar</span>
                    <span class="purchase-icon" aria-hidden="true">
                        <svg viewBox="0 0 16 16" class="bi bi-cart2" fill="currentColor" height="16" width="16" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l1.25 5h8.22l1.25-5H3.14zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z" />
                        </svg>
                    </span>
                </span>
            </button>
        </div>
    </section>

    <section id="payment" style="display:none;">
        <div class="payment-modal">
            <form class="payment-form">
                <h2>Pagamento</h2>
                <div class="payment-options">
                    <button type="button" class="payment-option" data-method="mbway">MB Way</button>
                    <button type="button" class="payment-option" data-method="entidade">Entidade & Refer√™ncia</button>
                </div>
                <div class="payment-separator">
                    <span class="line"></span>
                    <p>Escolha o m√©todo de pagamento</p>
                    <span class="line"></span>
                </div>
                <div class="payment-details">
                    <div class="input-container" id="mbway-fields">
                        <label class="input-label" for="mbway-number">N√∫mero MB Way</label>
                        <input id="mbway-number" class="input-field" type="text" placeholder="Ex: 912 345 678" />
                    </div>
                    <div class="input-container" id="entity-fields" style="display:none;">
                        <label class="input-label" for="entity-number">Entidade</label>
                        <input id="entity-number" class="input-field" type="text" value="12345" readonly />
                        <label class="input-label" for="reference-number">Refer√™ncia</label>
                        <input id="reference-number" class="input-field" type="text" value="000 000 000" readonly />
                    </div>
                    <div class="input-container">
                        <label class="input-label" for="payment-amount">Valor a pagar</label>
                        <input id="payment-amount" class="input-field" type="text" readonly />
                    </div>
                </div>
                <button class="purchase-btn" type="button" id="payment-confirm">Pagamento efetuado</button>
            </form>
        </div>
    </section>

    <section id="payment-confirmation" style="display:none;">
        <div class="cart-container">
            <h2>Compra efetuada</h2>
            <p>Receber√° em 5 a 8 dias.</p>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
            const EMAILJS_SERVICE_ID = 'replace_with_your_service_id';
            const EMAILJS_TEMPLATE_ID = 'replace_with_your_template_id';
            const EMAILJS_PUBLIC_KEY = 'replace_with_your_public_key';

            if (typeof emailjs !== 'undefined' && !EMAILJS_PUBLIC_KEY.startsWith('replace_')) {
                emailjs.init({ publicKey: EMAILJS_PUBLIC_KEY });
            }

            document.addEventListener("DOMContentLoaded", function () {
                // Anima√ß√£o de fade-in nos elementos ao carregar
                const elements = document.querySelectorAll(".fade-in");
                elements.forEach(el => {
                    el.style.opacity = 0;
                    el.style.transform = "translateY(20px)";
                    setTimeout(() => {
                        el.style.transition = "opacity 0.6s ease-out, transform 0.6s ease-out";
                        el.style.opacity = 1;
                        el.style.transform = "translateY(0)";
                    }, 200);
                });

                // Anima√ß√£o ao rolar a p√°gina
                function scrollAnimation() {
                    const scrollElements = document.querySelectorAll(".scroll-reveal");
                    scrollElements.forEach(el => {
                        const rect = el.getBoundingClientRect();
                        if (rect.top < window.innerHeight - 50) {
                            el.style.opacity = 1;
                            el.style.transform = "translateY(0)";
                        }
                    });
                }
                document.addEventListener("scroll", scrollAnimation);
                scrollAnimation();

                // Efeito nos bot√µes ao passar o mouse
                const buttons = document.querySelectorAll("button");
                buttons.forEach(btn => {
                    btn.addEventListener("mouseenter", () => {
                        btn.style.transform = "scale(1.1)";
                        btn.style.transition = "transform 0.3s ease";
                    });
                    btn.addEventListener("mouseleave", () => {
                        btn.style.transform = "scale(1)";
                    });
                });

                const cartSection = document.getElementById("cart");
                const cartToggle = document.getElementById("cart-toggle");
                const cartClose = document.getElementById("cart-close");
                const paymentSection = document.getElementById("payment");
                const confirmationSection = document.getElementById("payment-confirmation");
                const paymentOptions = document.querySelectorAll(".payment-option");
                const mbwayFields = document.getElementById("mbway-fields");
                const entityFields = document.getElementById("entity-fields");
                const paymentConfirm = document.getElementById("payment-confirm");

                const toggleCart = (isOpen) => {
                    cartSection.classList.toggle("is-visible", isOpen);
                    cartSection.setAttribute("aria-hidden", String(!isOpen));
                    cartToggle.setAttribute("aria-expanded", String(isOpen));
                };

                cartToggle.addEventListener("click", () => {
                    const isVisible = cartSection.classList.contains("is-visible");
                    toggleCart(!isVisible);
                });

                cartClose.addEventListener("click", () => toggleCart(false));

                paymentOptions.forEach(option => {
                    option.addEventListener("click", () => {
                        selectedPaymentMethod = option.dataset.method;
                        paymentOptions.forEach(btn => btn.classList.remove("is-active"));
                        option.classList.add("is-active");
                        const isMbway = selectedPaymentMethod === "mbway";
                        mbwayFields.style.display = isMbway ? "block" : "none";
                        entityFields.style.display = isMbway ? "none" : "block";
                    });
                });

                if (paymentOptions.length > 0) {
                    paymentOptions[0].click();
                }

                paymentConfirm.addEventListener("click", () => {
                    if (!orderPayload) {
                        alert("Nenhuma encomenda encontrada.");
                        return;
                    }

                    const mbwayNumber = document.getElementById("mbway-number").value.trim();
                    if (selectedPaymentMethod === "mbway" && !mbwayNumber) {
                        alert("Indique o n√∫mero MB Way.");
                        return;
                    }

                    const templateParams = {
                        ...orderPayload,
                        payment_method: selectedPaymentMethod === "mbway" ? "MB Way" : "Entidade e Refer√™ncia",
                        mbway_number: mbwayNumber || "N/A"
                    };

                    const enviarEmail = () => {
                        if (typeof emailjs === 'undefined') {
                            return Promise.reject(new Error('EmailJS n√£o est√° dispon√≠vel.'));
                        }

                        if (!EMAILJS_SERVICE_ID.startsWith('replace_') &&
                            !EMAILJS_TEMPLATE_ID.startsWith('replace_') &&
                            !EMAILJS_PUBLIC_KEY.startsWith('replace_')) {
                            return emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, templateParams);
                        }
                        return Promise.reject(new Error('Configura√ß√£o do EmailJS em falta.'));
                    };

                    enviarEmail()
                        .then(() => {
                            paymentSection.style.display = "none";
                            confirmationSection.style.display = "block";
                        })
                        .catch(() => {
                            alert("N√£o foi poss√≠vel enviar o email automaticamente. Verifique a configura√ß√£o do EmailJS.");
                        });
                });

                const eventAdd = document.getElementById("event-add");
                const eventList = document.getElementById("event-list");
                const eventName = document.getElementById("event-name");
                const eventLocation = document.getElementById("event-location");
                const eventStart = document.getElementById("event-start");
                const eventEnd = document.getElementById("event-end");

                eventAdd.addEventListener("click", () => {
                    const name = eventName.value.trim();
                    const location = eventLocation.value.trim();
                    const start = eventStart.value;
                    const end = eventEnd.value;

                    if (!name || !location || !start || !end) {
                        alert("Preencha todos os campos do evento.");
                        return;
                    }

                    const item = document.createElement("li");
                    item.innerHTML = `
                        <strong>${name}</strong>
                        <span>${location}</span>
                        <span>${new Date(start).toLocaleString("pt-PT")} - ${new Date(end).toLocaleString("pt-PT")}</span>
                    `;
                    eventList.appendChild(item);

                    eventName.value = "";
                    eventLocation.value = "";
                    eventStart.value = "";
                    eventEnd.value = "";
                });
            });


            let total = 0;
            let orderPayload = null;
            let selectedPaymentMethod = 'mbway';

            function adicionarAoCarrinho(nome, selectId) {
                const listaCarrinho = document.getElementById('cart-list');
                const select = document.getElementById(selectId);
                const selectedText = select.options[select.selectedIndex].text;
                const precoNumerico = parseFloat(select.value);
                const item = document.createElement('li');
                item.textContent = `${nome} ${selectedText}`;
                listaCarrinho.appendChild(item);


                total += precoNumerico;
                document.getElementById('cart-total').textContent = `Total: ‚Ç¨${total.toFixed(2)}`;
            }

            function finalizarCompra() {
                const listaCarrinho = document.getElementById('cart-list');
                const items = listaCarrinho.getElementsByTagName('li');
                if (items.length === 0) {
                    alert('O carrinho est√° vazio.');
                    return;
                }

                const checkoutList = document.getElementById('checkout-list');
                checkoutList.innerHTML = '';

                for (let i = 0; i < items.length; i++) {
                    const li = document.createElement('li');
                    li.textContent = items[i].textContent;
                    checkoutList.appendChild(li);
                }
                document.getElementById('checkout-total').textContent = `Total: ‚Ç¨${total.toFixed(2)}`;
                const purchaseButton = document.getElementById('purchase-button');
                purchaseButton.setAttribute('data-tooltip', `Total: ‚Ç¨${total.toFixed(2)}`);
                document.getElementById('checkout').style.display = 'block';
            }

            function comprar() {
                const name = document.getElementById('name').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const address = document.getElementById('address').value.trim();

                if (!name) {
                    alert('Por favor, preencha o seu nome.');
                    return;
                }

                if (!phone) {
                    alert('Por favor, preencha o seu contacto.');
                    return;
                }

                if (!address) {
                    alert('Por favor, preencha a sua morada.');
                    return;
                }

                const checkoutItems = document.querySelectorAll('#checkout-list li');
                if (!checkoutItems.length) {
                    alert('O carrinho est√° vazio.');
                    return;
                }

                const produtos = Array.from(checkoutItems).map(item => item.textContent).join('\n');

                orderPayload = {
                    customer_name: name,
                    customer_contact: phone,
                    customer_address: address,
                    order_items: produtos,
                    order_total: `‚Ç¨${total.toFixed(2)}`
                };

                document.getElementById('payment-amount').value = `‚Ç¨${total.toFixed(2)}`;
                document.getElementById('checkout').style.display = 'none';
                document.getElementById('payment').style.display = 'block';
            }


        </script>
</body>
</html>
